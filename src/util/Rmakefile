#
# SCCSid "$SunId$ LBL"
# Radiance makefile for utility programs
#

MACH = -DBSD

OPT = -O

CFLAGS = $(MACH) $(OPT) -I../common -L../lib

CC = cc

INSTDIR = /usr/local/bin

LIBDIR = /usr/local/lib/ray

PROGS = findglare xglaresrc glarendx rpiece rad ranimate vwright

all:	$(PROGS)

install:	all objview.csh objpict.csh glare.csh dayfact.csh rlux.csh \
raddepend.csh trad.wsh objline.csh
	cp $(PROGS) $(INSTDIR)
	cp objview.csh $(INSTDIR)/objview
	cp objline.csh $(INSTDIR)/objline
	cp objpict.csh $(INSTDIR)/objpict
	cp glare.csh $(INSTDIR)/glare
	cp dayfact.csh $(INSTDIR)/dayfact
	cp debugcal.csh $(INSTDIR)/debugcal
	cp rlux.csh $(INSTDIR)/rlux
	cp raddepend.csh $(INSTDIR)/raddepend
	chmod 755 $(INSTDIR)/objview $(INSTDIR)/objpict \
		$(INSTDIR)/glare $(INSTDIR)/dayfact $(INSTDIR)/debugcal \
		$(INSTDIR)/rlux $(INSTDIR)/raddepend $(INSTDIR)/objline
	csh -f tradinstall.csh $(INSTDIR) $(LIBDIR)/tcl

clean:
	set nonomatch; rm -f *.o $(PROGS) core

scanner:	scanner.o
	$(CC) $(CFLAGS) -o scanner scanner.o -lm

makedist:	makedist.o setscan.o
	$(CC) $(CFLAGS) -o makedist makedist.o setscan.o -lrt -lm

findglare:	findglare.o glareval.o glaresrc.o setscan.o
	$(CC) $(CFLAGS) -o findglare findglare.o glareval.o glaresrc.o \
setscan.o -lrt -lm

glarendx:	glarendx.o
	$(CC) $(CFLAGS) -o glarendx glarendx.o -lrt -lm

xglaresrc:	xglaresrc.o x11findwind.o
	$(CC) $(CFLAGS) -o xglaresrc xglaresrc.o \
x11findwind.o -lrt -lX11 -lm

rad:	rad.o loadvars.o
	$(CC) $(CFLAGS) -o rad rad.o loadvars.o -lrt -lm

ranimate:	ranimate.o loadvars.o netproc.o
	$(CC) $(CFLAGS) -o ranimate ranimate.o loadvars.o netproc.o -lrt -lm

rpiece:	rpiece.o Version.o
	$(CC) $(CFLAGS) -o rpiece rpiece.o Version.o -lrt -lm

vwright:	vwright.o
	$(CC) $(CFLAGS) -o vwright vwright.o -lrt -lm

contour:	contour.o
	$(CC) $(CFLAGS) -o contour contour.o -lm

pranim:	pranim.o client/libclient.a
	$(CC) $(CFLAGS) -o pranim pranim.o \
client/libclient.a -lrpcsvc

t16anim:	t16anim.o client/libclient.a
	$(CC) $(CFLAGS) -o t16anim t16anim.o \
client/libclient.a -lrpcsvc

t16anim.o pranim.o:	client/clnt.h

setscan.o makedist.o:	setscan.h

findglare.o glareval.o \
glaresrc.o:	glare.h ../common/standard.h ../common/mat4.h \
../common/fvect.h ../common/view.h ../common/color.h setscan.h

glaresrc.o:	../common/linregr.h

rpiece.o:	../common/color.h ../common/view.h ../common/resolu.h

rad.o ranimate.o rpiece.o xglaresrc.o:	../common/standard.h \
../common/mat4.h ../common/fvect.h

xglaresrc.o:	../common/view.h

swaprasheader.o:	../common/rasterfile.h

glareval.o xglaresrc.o:	../common/resolu.h

xglaresrc.o:	../common/vfork.h

rad.o ranimate.o loadvars.o:	vars.h

rad.o:	../common/paths.h

ranimate.o netproc.o:	netproc.h

netproc.o:	../common/paths.h

ranimate.o:	../common/view.h
