# SCCSid "$SunId$ LBL"

#
#  Compiles for image processing and display programs
#

OPT = -O
MACH = -DSTRUCTASSIGN
CFLAGS = $(OPT) $(MACH)

INSTDIR = ../../bin

LIBDIR = /usr/local/lib/ray

CALDEFS = -DFUNCTION -DVARIABLE -DRCONST -DBIGLIB

PIXAR_INCLUDE=	-I/usr/pixar/include
PIXAR_LIB=	-L/usr/pixar/host/lib -lpirl -lpicio -lchad -lpixar -lm

PROGS = pfilt ttyimage oki20c paintjet mt160r getinfo psign \
greyscale pvalue pcompos colorscale prot \
ra_t8 ra_bn ra_t16 pcomb pinterp x11image xshowtrace pflip

all:	$(PROGS)

x10:	ximage
	cp ximage $(INSTDIR)

aed:	aedimage
	cp aedimage $(INSTDIR)

sun:

install:	$(PROGS) normpat.csh
	cp $(PROGS) $(INSTDIR)
	cp normpat.csh $(INSTDIR)/normpat
	chmod 755 $(INSTDIR)/normpat

clean:
	rm -f $(PROGS) *.o core

pfilt:	pfilt.o pf2.o pf3.o resolu.o color.o header.o lamps.o \
rexpr.o fropen.o spec_rgb.o
	cc $(CFLAGS) -o pfilt pfilt.o pf2.o pf3.o resolu.o color.o \
header.o lamps.o rexpr.o fropen.o spec_rgb.o -lm

ttyimage:	ttyimage.o resolu.o color.o colrops.o header.o
	cc $(CFLAGS) -o ttyimage ttyimage.o resolu.o color.o colrops.o \
header.o -lm

t4027:	t4027.o color.o resolu.o
	cc $(CFLAGS) -o t4027 t4027.o color.o resolu.o

glimage:	glimage.o color.o colrops.o resolu.o header.o
	cc $(CFLAGS) -o glimage glimage.o color.o colrops.o resolu.o \
header.o -lgl_s -lm

aedimage:	aedimage.o color.o colrops.o resolu.o ciq.o cut.o closest.o \
ealloc.o biq.o header.o
	cc $(CFLAGS) -o aedimage aedimage.o color.o colrops.o resolu.o \
ciq.o cut.o closest.o ealloc.o biq.o header.o -lm

oki20c:	oki20c.o color.o colrops.o resolu.o header.o
	cc $(CFLAGS) -o oki20c oki20c.o color.o colrops.o resolu.o header.o -lm

paintjet:	paintjet.o color.o colrops.o resolu.o header.o
	cc $(CFLAGS) -o paintjet paintjet.o color.o colrops.o resolu.o \
header.o -lm

mt160r:	mt160r.o color.o colrops.o resolu.o header.o
	cc $(CFLAGS) -o mt160r mt160r.o color.o colrops.o resolu.o header.o -lm

getinfo:	getinfo.o header.o
	cc $(CFLAGS) -n -o getinfo getinfo.o header.o

greyscale:	greyscale.o color.o resolu.o
	cc $(CFLAGS) -o greyscale greyscale.o color.o resolu.o -lm

colorscale:	colorscale.o color.o resolu.o
	cc $(CFLAGS) -o colorscale colorscale.o color.o resolu.o

pvalue:	pvalue.o color.o resolu.o header.o
	cc $(CFLAGS) -o pvalue pvalue.o color.o resolu.o header.o

psum:	psum.o color.o resolu.o header.o
	cc $(CFLAGS) -o psum psum.o color.o resolu.o header.o

pcompos:	pcompos.o color.o resolu.o header.o
	cc $(CFLAGS) -o pcompos pcompos.o color.o resolu.o header.o

psign:	psign.o color.o resolu.o fropen.o
	cc $(CFLAGS) -o psign psign.o color.o resolu.o fropen.o

d48c:	d48c.o color.o resolu.o
	cc $(CFLAGS) -o d48c d48c.o color.o resolu.o

ra_pr:	ra_pr.o ciq.o cut.o closest.o color.o colrops.o resolu.o ealloc.o \
header.o biq.o
	cc $(CFLAGS) -o ra_pr ra_pr.o ciq.o cut.o closest.o \
color.o colrops.o resolu.o ealloc.o header.o biq.o -lm

ra_pr24:	ra_pr24.o color.o colrops.o resolu.o header.o
	cc $(CFLAGS) -o ra_pr24 ra_pr24.o color.o colrops.o resolu.o \
header.o -lm

ra_t8:	ra_t8.o ciq.o cut.o closest.o color.o colrops.o resolu.o \
ealloc.o header.o biq.o
	cc $(CFLAGS) -o ra_t8 ra_t8.o ciq.o cut.o closest.o \
color.o colrops.o resolu.o ealloc.o header.o biq.o -lm

ra_t16: ra_t16.o color.o colrops.o resolu.o ealloc.o header.o
	cc $(CFLAGS) -o ra_t16 ra_t16.o color.o colrops.o \
resolu.o ealloc.o header.o -lm

ra_im: ra_im.o
	cc $(CFLAGS) -n -o ra_im ra_im.o

ra_bn: ra_bn.o color.o colrops.o resolu.o header.o
	cc $(CFLAGS) -o ra_bn ra_bn.o color.o colrops.o resolu.o header.o -lm

ximage:	ximage.o color.o colrops.o resolu.o ciq.o cut.o closest.o ealloc.o \
xraster.o header.o biq.o image.o fvect.o
	cc $(CFLAGS) -o ximage ximage.o color.o colrops.o resolu.o xraster.o \
header.o ciq.o cut.o closest.o ealloc.o biq.o image.o fvect.o -lX -lm

x11image:	x11image.o color.o colrops.o resolu.o ciq.o cut.o closest.o \
ealloc.o x11raster.o header.o biq.o image.o fvect.o
	cc $(CFLAGS) -o x11image x11image.o color.o colrops.o resolu.o \
x11raster.o header.o ciq.o cut.o closest.o ealloc.o biq.o image.o \
fvect.o -lX11 -lm

prot:		prot.o color.o resolu.o header.o
	cc $(CFLAGS) -o prot prot.o color.o resolu.o header.o

pflip:		pflip.o color.o resolu.o header.o
	cc $(CFLAGS) -o pflip pflip.o color.o resolu.o header.o

panim:	panim.o color.o colrops.o resolu.o header.o client/libclient.a
	cc $(CFLAGS) -o panim panim.o color.o colrops.o resolu.o header.o \
client/libclient.a -lrpcsvc -lm

pcomb:	pcomb.o calexpr.o calfunc.o caldefn.o color.o resolu.o \
header.o ealloc.o savestr.o
	cc $(CFLAGS) -o pcomb pcomb.o calexpr.o calfunc.o caldefn.o \
color.o resolu.o header.o ealloc.o savestr.o -lm

pinterp:	pinterp.o image.o header.o color.o resolu.o fvect.o mat4.o
	cc $(CFLAGS) -o pinterp pinterp.o image.o header.o mat4.o \
fvect.o color.o resolu.o -lm

ra_pixar:	ra_pixar.o ra_pixar.c color.o resolu.o header.o
	cc $(CFLAGS) $(PIXAR_INCLUDE) -o $@ ra_pixar.o color.o resolu.o header.o \
$(PIXAR_LIB)

calexpr.o:	calexpr.c
	cc $(CFLAGS) $(CALDEFS) -c calexpr.c

calfunc.o:	calfunc.c
	cc $(CFLAGS) $(CALDEFS) -c calfunc.c

caldefn.o:	caldefn.c
	cc $(CFLAGS) $(CALDEFS) -c caldefn.c

ra_pixar.o:	ra_pixar.c
	cc $(CFLAGS) $(PIXAR_INCLUDE) -c ra_pixar.c

xshowtrace:	xshowtrace.o image.o resolu.o header.o fvect.o
	cc $(CFLAGS) -o xshowtrace xshowtrace.o image.o resolu.o header.o \
fvect.o -lm -lX11

fropen.o:	fropen.c
	cc $(CFLAGS) -DDEFPATH=\":$(LIBDIR)\" -c fropen.c

xshowtrace.o:	view.h standard.h mat4.h fvect.h

mat4.o:		mat4.h fvect.h

pcomb.o calexpr.o calfunc.o caldefn.o:	calcomp.h

panim.o:	client/scan.h color.h random.h

pf2.o bnoise.o:	random.h

ra_t16.o:	random.h

pfilt.o pf2.o ttyimage.o t4027.o mt160r.o psum.o psign.o prot.o ra_pr24.o \
d48c.o aedimage.o pcompos.o color.o resolu.o colrops.o pflip.o \
greyscale.o ra_t8.o glimage.o \
ra_bn.o ra_t16.o ra_pr.o pvalue.o pcomb.o pinterp.o ximage.o:	color.h

prot.o biq.o ciq.o pinterp.o \
ximage.o image.o:	standard.h mat4.h fvect.h

ximage.o x11raster.o:	xraster.h

x11image.o x11raster.o:	x11raster.h

ra_t8.o:	targa.h

fvect.o:	fvect.h

aedimage.o ximage.o ra_t8.o ra_pr.o:	pic.h

ciq.o cut.o closest.o biq.o:	pic.h ciq.h

pinterp.o ximage.o image.o:	view.h
